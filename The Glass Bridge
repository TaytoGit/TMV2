--CREDIT IS APPRECIATED :)

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local pg = player:WaitForChild("PlayerGui")

local old = pg:FindFirstChild("TaytosGlassMenuUI")
if old then old:Destroy() end

local function hookWeakPanel(panel)
	if not panel or not panel:IsA("BasePart") or panel:GetAttribute("__hooked") then return end
	panel:SetAttribute("__hooked", true)
	local gw = panel.Parent
	local step = panel:FindFirstAncestor("Step")
	if not step or not gw then return end
	step.DescendantRemoving:Connect(function(inst)
		if inst == panel and gw and gw.Parent then
			local stepable = gw:FindFirstChild("stepable")
			if stepable and stepable:IsA("BasePart") then
				stepable.Color = Color3.fromRGB(0, 0, 0)
				stepable.Material = Enum.Material.SmoothPlastic
				stepable.Anchored = true
				stepable.CanCollide = true
				stepable.Transparency = 0
				stepable.CFrame = panel.CFrame
			end
		end
	end)
end

local function scanAndHookWeakPanels(root)
	for _, d in ipairs((root or workspace):GetDescendants()) do
		if d:IsA("BasePart") and d.Name == "glass_panel_weak" then
			hookWeakPanel(d)
		end
	end
end

workspace.DescendantAdded:Connect(function(d)
	if d:IsA("BasePart") and d.Name == "glass_panel_weak" then
		hookWeakPanel(d)
	end
end)

local BASE_W, BASE_H = 420, 420
local BG = Color3.fromRGB(10,10,14)
local STROKE = Color3.fromRGB(70,40,110)
local PRIMARY = Color3.fromRGB(120,85,220)
local MUTED = Color3.fromRGB(46,44,58)
local TEXT = Color3.fromRGB(235,232,255)
local SUBTEXT = Color3.fromRGB(210,205,230)

local gui = Instance.new("ScreenGui")
gui.Name = "TaytosGlassMenuUI"
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Global
gui.DisplayOrder = 999999
gui.IgnoreGuiInset = true
gui.Parent = pg

local win = Instance.new("Frame")
win.Size = UDim2.fromOffset(BASE_W, BASE_H)
win.Position = UDim2.new(0.5,0,0.5,0)
win.AnchorPoint = Vector2.new(0.5,0.5)
win.BackgroundColor3 = BG
win.BorderSizePixel = 0
win.Parent = gui
Instance.new("UICorner", win).CornerRadius = UDim.new(0,16)
local wst = Instance.new("UIStroke", win) wst.Color = STROKE wst.Thickness = 1.5
local wgr = Instance.new("UIGradient", win) wgr.Rotation = 90
wgr.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(12,12,16)),
	ColorSequenceKeypoint.new(0.5, Color3.fromRGB(20,16,28)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(42,8,68)),
}

local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1,0,0,40)
titleBar.BackgroundTransparency = 1
titleBar.Parent = win

local title = Instance.new("TextLabel")
title.BackgroundTransparency = 1
title.Size = UDim2.new(1,-120,1,0)
title.Position = UDim2.fromOffset(16,0)
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Left
title.TextColor3 = TEXT
title.Text = "Tayto's Glass Bridge Menu"
title.Parent = titleBar

local btnHolder = Instance.new("Frame")
btnHolder.BackgroundTransparency = 1
btnHolder.Size = UDim2.fromOffset(96,28)
btnHolder.AnchorPoint = Vector2.new(1,0.5)
btnHolder.Position = UDim2.new(1,-10,0.5,0)
btnHolder.Parent = titleBar
local bl = Instance.new("UIListLayout", btnHolder)
bl.FillDirection = Enum.FillDirection.Horizontal
bl.Padding = UDim.new(0,8)
bl.HorizontalAlignment = Enum.HorizontalAlignment.Right
bl.VerticalAlignment = Enum.VerticalAlignment.Center

local function icon(txt)
	local b = Instance.new("TextButton")
	b.Size = UDim2.fromOffset(44,28)
	b.Text = txt
	b.BackgroundColor3 = Color3.fromRGB(30,30,40)
	b.AutoButtonColor = false
	b.Font = Enum.Font.GothamSemibold
	b.TextSize = 14
	b.TextColor3 = TEXT
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,8)
	local s = Instance.new("UIStroke", b) s.Color = Color3.fromRGB(80,60,120) s.Thickness = 1
	b.Parent = btnHolder
	return b
end

local closeBtn = icon("X")
local minBtn = icon("â€”")

local content = Instance.new("Frame")
content.Size = UDim2.new(1,-24,1,-64)
content.Position = UDim2.fromOffset(12,52)
content.BackgroundTransparency = 1
content.Parent = win

local lay = Instance.new("UIListLayout", content)
lay.Padding = UDim.new(0,10)
lay.SortOrder = Enum.SortOrder.LayoutOrder

local function label(txt)
	local l = Instance.new("TextLabel")
	l.Size = UDim2.new(1,0,0,20)
	l.BackgroundTransparency = 1
	l.Font = Enum.Font.GothamBold
	l.TextSize = 16
	l.TextXAlignment = Enum.TextXAlignment.Left
	l.TextColor3 = TEXT
	l.Text = txt
	l.Parent = content
	return l
end

local function pill(txt, color)
	local b = Instance.new("TextButton")
	b.Size = UDim2.new(1,0,0,44)
	b.BackgroundColor3 = color
	b.AutoButtonColor = false
	b.Font = Enum.Font.GothamSemibold
	b.TextSize = 16
	b.TextColor3 = Color3.new(1,1,1)
	b.Text = txt
	Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)
	return b
end

local function halfRow()
	local f = Instance.new("Frame")
	f.Size = UDim2.new(1,0,0,44)
	f.BackgroundTransparency = 1
	f.Parent = content
	local hl = Instance.new("UIListLayout", f)
	hl.FillDirection = Enum.FillDirection.Horizontal
	hl.Padding = UDim.new(0,10)
	return f
end

label("Reveal Glass Panels")
local execBtn = pill("Execute", PRIMARY) execBtn.Parent = content

label("Break All Glass")
local breakBtn = pill("Execute", PRIMARY) breakBtn.Parent = content

label("Auto Win")
local row = halfRow()
local enableBtn = pill("Enable", PRIMARY) enableBtn.Size = UDim2.new(0.5,-5,1,0) enableBtn.Parent = row
local disableBtn = pill("Disabled", MUTED) disableBtn.TextColor3 = TEXT disableBtn.Size = UDim2.new(0.5,-5,1,0) disableBtn.Parent = row

label("Bypass Anti Cheat (With Infinite Yield)")
local acBtn = pill("Enable", PRIMARY) acBtn.Parent = content

local status = Instance.new("TextLabel")
status.BackgroundTransparency = 1
status.Size = UDim2.new(1,0,0,20)
status.Font = Enum.Font.Gotham
status.TextSize = 14
status.TextXAlignment = Enum.TextXAlignment.Left
status.TextColor3 = SUBTEXT
status.Text = "Status: Ready"
status.Parent = content

execBtn.MouseButton1Click:Connect(function()
	status.Text = "Status: Revealing..."
	for _, step in ipairs(workspace:GetChildren()) do
		if step:IsA("Model") and step.Name == "Step" then
			local glass_tempered = step:FindFirstChild("glass_tempered")
			if glass_tempered then
				local glass_panel = glass_tempered:FindFirstChild("glass_panel")
				if glass_panel and glass_panel:IsA("BasePart") then
					glass_panel.Color = Color3.fromRGB(0, 255, 0)
				end
			end
			local glass_weak = step:FindFirstChild("glass_weak")
			if glass_weak then
				local glass_panel_weak = glass_weak:FindFirstChild("glass_panel_weak")
				if glass_panel_weak and glass_panel_weak:IsA("BasePart") then
					glass_panel_weak.Color = Color3.fromRGB(255, 0, 0)
					if not glass_weak:FindFirstChild("stepable") then
						local clone = glass_panel_weak:Clone()
						clone.Name = "stepable"
						clone.Anchored = true
						clone.CanCollide = true
						clone.Transparency = 0
						clone.CFrame = glass_panel_weak.CFrame
						clone.Parent = glass_weak
					end
				end
				local detector = glass_weak:FindFirstChild("Detector")
				if detector then detector:Destroy() end
			end
		end
	end
	for _, inst in ipairs(workspace:GetDescendants()) do
		if inst.Name == "PushZ" then pcall(function() inst:Destroy() end) end
	end
	local function isLobby(inst) return typeof(inst.Name) == "string" and inst.Name:lower() == "lobby" end
	local function purgeLobby(inst) if inst and inst.Parent then inst:Destroy() end end
	for _, inst in ipairs(workspace:GetDescendants()) do if isLobby(inst) then purgeLobby(inst) end end
	workspace.ChildAdded:Connect(function(child) if isLobby(child) then purgeLobby(child) end end)
	workspace.DescendantAdded:Connect(function(desc)
		if isLobby(desc) then purgeLobby(desc) return end
		local p = desc.Parent
		while p do
			if isLobby(p) then purgeLobby(p) break end
			p = p.Parent
		end
	end)
	local existing = workspace:FindFirstChild("OOOOOOOOOOOKKK")
	if existing then existing:Destroy() end
	local p = Instance.new("Part")
	p.Name = "OOOOOOOOOOOKKK"
	p.Anchored = true
	p.Size = Vector3.new(350, 2, 400)
	p.CFrame = CFrame.new(-116.751099, 47.6960335, 88.6486359)
	p.Transparency = 0.75
	p.Parent = workspace
	scanAndHookWeakPanels()
	status.Text = "Status: Reveal complete"
end)

breakBtn.MouseButton1Click:Connect(function()
	status.Text = "Status: Breaking all glass..."
	local lp = Players.LocalPlayer
	local function getHRP()
		local char = lp.Character or lp.CharacterAdded:Wait()
		return char:WaitForChild("HumanoidRootPart")
	end
	local function hasTouchInterest(part)
		if not part or not part:IsA("BasePart") then return false end
		return part:FindFirstChildWhichIsA("TouchTransmitter") or part:FindFirstChild("TouchInterest")
	end
	local fired = 0
	local hrp = getHRP()
	for _, inst in ipairs(workspace:GetDescendants()) do
		if inst:IsA("Model") and inst.Name == "Step" then
			local gw = inst:FindFirstChild("glass_weak")
			if gw then
				local detector = gw:FindFirstChild("Detector")
				if hasTouchInterest(detector) then
					local ok = pcall(function()
						firetouchinterest(hrp, detector, 0)
						firetouchinterest(hrp, detector, 1)
					end)
					if ok then fired += 1 end
				end
			end
		end
	end
	status.Text = fired > 0 and ("Status: Triggered "..fired.." detectors") or "Status: No detectors found"
end)

local enabled = false
local running = false
local winPart = nil
local targetCFrame = CFrame.new(-16.8024502, 57.4340744, -45.530674, 0,1,0, 1,0,0, 0,0,-1)

local function setEnabledUI()
	enableBtn.Text = "Enabled"
	enableBtn.BackgroundColor3 = Color3.fromRGB(70,68,90)
	disableBtn.Text = "Disable"
	disableBtn.BackgroundColor3 = PRIMARY
	disableBtn.TextColor3 = Color3.new(1,1,1)
end

local function setDisabledUI()
	enableBtn.Text = "Enable"
	enableBtn.BackgroundColor3 = PRIMARY
	disableBtn.Text = "Disabled"
	disableBtn.BackgroundColor3 = MUTED
	disableBtn.TextColor3 = TEXT
end

local function loop()
	if running then return end
	running = true
	while enabled do
		if not winPart then
			winPart = workspace:FindFirstChild("WinPart") or workspace:WaitForChild("WinPart", 5)
			if not winPart then
				status.Text = "Status: WinPart not found"
				enabled = false
				break
			end
		end
		local char = player.Character
		local hrp = char and char:FindFirstChild("HumanoidRootPart")
		if hrp and winPart then
			winPart.Anchored = true
			winPart.CFrame = CFrame.new(hrp.Position)
			task.wait(0.25)
			winPart.CFrame = targetCFrame
		end
		task.wait(1)
	end
	running = false
end

enableBtn.MouseButton1Click:Connect(function()
	if enabled then return end
	enabled = true
	setEnabledUI()
	status.Text = "Status: Auto Win enabled"
	loop()
end)

disableBtn.MouseButton1Click:Connect(function()
	if not enabled then return end
	enabled = false
	if winPart then winPart.CFrame = targetCFrame end
	setDisabledUI()
	status.Text = "Status: Auto Win disabled"
end)

setDisabledUI()

local acEnabled = false
local acConns = {}
local disableList = {
	"AntiFly","AntiTeleportClient","AntiTeleport","DisableClimb",
	"CharacterTurnDelay","AntiHump","Main"
}

local function disconnectAll(tbl)
	for _,c in ipairs(tbl) do pcall(function() c:Disconnect() end) end
	table.clear(tbl)
end

local function forceDisableScript(scr)
	if scr and (scr:IsA("LocalScript") or scr:IsA("Script")) then
		if scr.Disabled ~= true then scr.Disabled = true end
		if not scr:GetAttribute("__hooked") then
			scr:SetAttribute("__hooked", true)
			table.insert(acConns, scr:GetPropertyChangedSignal("Disabled"):Connect(function()
				if acEnabled and scr.Disabled ~= true then
					scr.Disabled = true
				end
			end))
		end
	end
end

local function acEnforce(character)
	for _, n in ipairs(disableList) do
		for _, inst in ipairs(character:GetDescendants()) do
			if inst.Name == n then
				forceDisableScript(inst)
			end
		end
	end
	local authorized = character:FindFirstChild("AuthorizedTeleport")
	if authorized and authorized:IsA("BoolValue") then
		if authorized.Value == false then authorized.Value = true end
		if not authorized:GetAttribute("__hooked") then
			authorized:SetAttribute("__hooked", true)
			table.insert(acConns, authorized.Changed:Connect(function()
				if acEnabled and authorized.Value == false then
					authorized.Value = true
				end
			end))
		end
	end
end

local function acManageCharacter(character)
	acEnforce(character)
	table.insert(acConns, character.DescendantAdded:Connect(function(inst)
		if table.find(disableList, inst.Name) then
			forceDisableScript(inst)
		end
	end))
	local hb
	hb = RunService.Heartbeat:Connect(function()
		if not acEnabled then hb:Disconnect() return end
		acEnforce(character)
	end)
	table.insert(acConns, hb)
end

acBtn.MouseButton1Click:Connect(function()
	if acEnabled then return end
	acEnabled = true
	acBtn.Text = "Enabled"
	acBtn.BackgroundColor3 = Color3.fromRGB(70,68,90)
	status.Text = "Status: Anti Cheat bypass enabled + Infinite Yield loaded"
	pcall(function()
		loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
	end)
	if player.Character then acManageCharacter(player.Character) end
	table.insert(acConns, player.CharacterAdded:Connect(function(newChar)
		if acEnabled then acManageCharacter(newChar) end
	end))
end)

local minimized, saved = false, win.Size
minBtn.MouseButton1Click:Connect(function()
	minimized = not minimized
	if minimized then
		saved = win.Size
		TweenService:Create(win, TweenInfo.new(0.18, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = UDim2.fromOffset(BASE_W,56)}):Play()
		content.Visible = false
	else
		TweenService:Create(win, TweenInfo.new(0.18, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = saved}):Play()
		task.delay(0.18, function() content.Visible = true end)
	end
end)

closeBtn.MouseButton1Click:Connect(function()
	gui:Destroy()
	disconnectAll(acConns)
	acEnabled = false
end)

do
	local drag = false
	local startPos, startMouse
	titleBar.InputBegan:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then
			drag = true
			startMouse = i.Position
			startPos = win.Position
			i.Changed:Connect(function()
				if i.UserInputState == Enum.UserInputState.End then
					drag = false
				end
			end)
		end
	end)
	titleBar.InputChanged:Connect(function(i)
		if drag and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
			local d = i.Position - startMouse
			win.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + d.X, startPos.Y.Scale, startPos.Y.Offset + d.Y)
		end
	end)
end

win.Size = UDim2.fromOffset(BASE_W, 0)
TweenService:Create(win, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = UDim2.fromOffset(BASE_W, BASE_H)}):Play()

scanAndHookWeakPanels()
